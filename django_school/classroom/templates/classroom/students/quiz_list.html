{% extends 'base.html' %}

{% block content %}

<script type="text/javascript">
  
  window.onload = function begin(){
  document.getElementById('timer').innerHTML =
    30 + ":" + 00;
  startTimer();
  }
  function startTimer() {
    var presentTime = document.getElementById('timer').innerHTML;
    var timeArray = presentTime.split(/[:]+/);
    var m = timeArray[0];
    var s = checkSecond((timeArray[1] - 1));
    if(s==59){m=m-1}
    if(m<0){
      document.getElementById('quiz').submit();
    }
    document.getElementById('timer').innerHTML =
      m + ":" + s;
    setTimeout(startTimer, 1000);
    
  }
  
  function checkSecond(sec) {
    if (sec < 10 && sec >= 0) {sec = "0" + sec}; // add zero in front of numbers < 10
    if (sec < 0) {sec = "59"};
    return sec;
  }
  </script>
   <div class='float-right sticky-top'>
    <div class="row justify-content-top-right">
      <div class="col-mx-auto">
        <div class="alert alert-success" role="alert"><top-right>Time left : <span id="timer"></span></top-right>  
        </div>
      </div>
    </div>
  </div>
  
  {% include 'classroom/students/_header.html' with active='new' %}
 
  <div class="card">
    <table class="table mb-0">
      <thead>
        <tr>
          <th>Quiz</th>
          <th>Subject</th>
          <th>No of questions</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for quiz in quizzes %}
          <tr>
            <td class="align-middle">{{ quiz.name }}</td>
            <td class="align-middle">{{ quiz.subject.get_html_badge }}</td>
            <td class="align-middle">{{ quiz.questions_count }} questions</td>
            <td class="text-right">
              <a href="{% url 'students:take_quiz' quiz.pk %}" class="btn btn-primary">Start quiz</a>
             
            </td>
          </tr>
        {% empty %}
          <tr>
            <td class="bg-light text-center font-italic" colspan="4">No quiz matching your interests right now.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
      
{% endblock %}
